import React,{useState} from 'react';import {supabase} from '../lib/supabase';import {Link} from '../lib/router';export default function Auth(){const[e,se]=useState('');const[p,sp]=useState('');const[l,sl]=useState(false);const[m,sm]=useState('login');const[err,seErr]=useState(null);const sub=async ev=>{ev.preventDefault();sl(true);seErr(null);try{if(m==='login'){const{error}=await supabase.auth.signInWithPassword({email:e,password:p});if(error)throw error}else{const{error}=await supabase.auth.signUp({email:e,password:p});if(error)throw error}}catch(er){seErr(er?.message||'Erro ao autenticar')}finally{sl(false)}};return <div className='min-h-screen flex items-center justify-center p-4'><div className='card w-full max-w-md'><div className='card-pad'><div className='text-center mb-6'><img src='/logo.svg' className='mx-auto h-12 w-12 rounded-2xl'/><h1 className='text-2xl font-bold mt-3'>CRM Grátis</h1><p className='text-gray-600'>Cadastre-se ou entre para começar</p></div><form onSubmit={sub} className='space-y-3'><input className='input' type='email' placeholder='Seu email' value={e} onChange={ev=>se(ev.target.value)} required/><input className='input' type='password' placeholder='Senha' value={p} onChange={ev=>sp(ev.target.value)} required/>{err&&<div className='text-sm text-red-500'>{err}</div>}<button disabled={l} className='btn-primary w-full'>{l?'Aguarde...':m==='login'?'Entrar':'Criar conta'}</button></form><div className='text-center mt-4'>{m==='login'?<button onClick={()=>sm('signup')} className='text-sm'>Não tem conta? Criar</button>:<button onClick={()=>sm('login')} className='text-sm'>Já tem conta? Entrar</button>}</div><div className='text-center mt-3'><Link to='/sobre' className='text-xs'>Saiba mais</Link></div></div></div></div>}